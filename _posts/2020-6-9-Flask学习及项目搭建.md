---
layout: post
author: LIU,HONGYANG
tags: [Python]
---





##### 运行第一个Flask程序



- 安装flask



```
pip install flask
```



- 卸载flask



```
pip uninstall flask
```



- 打印flask版本

```
print (flask.__version__)
```



- 第一个Flask程序



run中参数:

debug用于是否自动编译运行程序



@app.route是一个装饰器

@app开头，并且在函数上面，说明是装饰器，用于调用debu请求





```
from flask import Flask

app = Flask(__name__)


@app.route('/')
def hello_world():
    a =10
    b =0
    c = a/10
    c =1
    d =2
    return "sdfs"

if __name__ == '__main__':
    app.run(debug=True,port=8000,host='0.0.0.0')
```





##### debug模式



1.新建一个`config.py`文件

```
DEBUG=True
```





2.在主app文件中导入这个文件，并且配置到`app`中，示例代码如下：



```
import config
app.config.from_object(config)
```



3.还有许多其它参数文件，都是放在这个配置文件中，比如`SECRET_KEY`和`SQLALCHEMY`这些都是在配置文件中



```
from flask import Flask
import config
app = Flask(__name__)
app.config.from_object(config)

@app.route('/')

def hello_world():
    a =10
    b =0
    c = a/10
    c =1
    d =2
    return "sdfs"

if __name__ == '__main__':
    app.run()
```





![image-20200305143131295](https://tva1.sinaimg.cn/large/00831rSTgy1gcj1f9ocwrj311y096765.jpg)





##### url传参：



> 1.参数的作用，可以在相同的URL, 但是指定不同的参数，来加载不同的数据



```
from flask import Flask
import config
app = Flask(__name__)
app.config.from_object(config)

@app.route('/')
def hello_world():
    a =10
    b =0
    c = a/10
    c =1
    d =2
    return "sdfs"

@app.route('/article/<id>')
def article(id):

    id = int(id)+2;
    return u'ther parameter is %s'%id

if __name__ == '__main__':
    app.run()
```





##### url反转



什么叫做反转URL:

从视图函数到URL的转换叫做反转URL

反转URL的作用：

- 在页面重定向的时候，会使用反转URL
- 在模版中，也会使用URL反转。



如果反转函数需要携带函数，比如id2，则在反转的过程中，就应该添加参数，否则会出错。



第二要注意的url_for的参数应该与方法名保持一致



```
from flask import Flask,url_for

app =Flask(__name__)

@app.route('/')
def index():
    print (url_for('my_list'))
    print (url_for('article',id2='liuhongyang'))
    return "Hello World"

@app.route('/list/')
def my_list():
    return 'list'

@app.route('/article/<id2>/')
def article(id2):
    return u'您的请求id是%s'%id2


if __name__ == '__main__':
    app.run(debug=True)
```





##### 页面跳转和重定向





用处：在用户访问一些需要登录的页面的时候，如果用户没有登录，那么可以让它重定向到登录页面。



> 页面跳转



```
from flask import Flask,redirect,url_for

app = Flask(__name__)

@app.route('/')
def index():
    login_url = url_for('login')
    return redirect(login_url)
    return u'这是首页'

@app.route('/login/')
def login():
    return u'这是登录页面'

if __name__ == '__main__':
    app.run(debug=True)
```

