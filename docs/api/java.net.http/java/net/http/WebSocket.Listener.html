<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>WebSocket.Listener (Java SE 14 &amp; JDK 14)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: java.net.http, package: java.net.http, interface: WebSocket, interface: Listener">
<meta name="generator" content="javadoc/ClassWriterImpl">
<meta name="keywords" content="java.net.http.WebSocket.Listener interface">
<meta name="keywords" content="onOpen()">
<meta name="keywords" content="onText()">
<meta name="keywords" content="onBinary()">
<meta name="keywords" content="onPing()">
<meta name="keywords" content="onPong()">
<meta name="keywords" content="onClose()">
<meta name="keywords" content="onError()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":18,"i1":18,"i2":18,"i3":18,"i4":18,"i5":18,"i6":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WebSocket.Listener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><div style="margin-top: 14px;"><strong>Java SE 14 &amp; JDK 14</strong> </div></div>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="moduleLabelInType">Module</span>&nbsp;<a href="../../../module-summary.html">java.net.http</a></div>
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">java.net.http</a></div>
<h1 title="Interface WebSocket.Listener" class="title">Interface WebSocket.Listener</h1>
</div>
<div class="contentContainer">
<section class="description">
<dl>
<dt>Enclosing interface:</dt>
<dd><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a></dd>
</dl>
<hr>
<pre>public static interface <span class="typeNameLabel">WebSocket.Listener</span></pre>
<div class="block">The receiving interface of <code>WebSocket</code>.

 <p> A <code>WebSocket</code> invokes methods of the associated listener
 passing itself as an argument. These methods are invoked in a thread-safe
 manner, such that the next invocation may start only after the previous
 one has finished.

 <p> When data has been received, the <code>WebSocket</code> invokes a receive
 method. Methods <code>onText</code>, <code>onBinary</code>, <code>onPing</code> and
 <code>onPong</code> must return a <code>CompletionStage</code> that completes once
 the message has been received by the listener. If a listener's method
 returns <code>null</code> rather than a <code>CompletionStage</code>,
 <code>WebSocket</code> will behave as if the listener returned a
 <code>CompletionStage</code> that is already completed normally.

 <p> An <code>IOException</code> raised in <code>WebSocket</code> will result in an
 invocation of <code>onError</code> with that exception (if the input is not
 closed). Unless otherwise stated if the listener's method throws an
 exception or a <code>CompletionStage</code> returned from a method completes
 exceptionally, the WebSocket will invoke <code>onError</code> with this
 exception.</div>
<dl>
<dt><span class="simpleTagLabel">API Note:</span></dt>
<dd>The strict sequential order of invocations from
 <code>WebSocket</code> to <code>Listener</code> means, in particular, that the
 <code>Listener</code>'s methods are treated as non-reentrant. This means that
 <code>Listener</code> implementations do not need to be concerned with
 possible recursion or the order in which they invoke
 <code>WebSocket.request</code> in relation to their processing logic.

 <p> Careful attention may be required if a listener is associated
 with more than a single <code>WebSocket</code>. In this case invocations
 related to different instances of <code>WebSocket</code> may not be ordered
 and may even happen concurrently.

 <p> <code>CompletionStage</code>s returned from the receive methods have
 nothing to do with the
 <a href="WebSocket.html#counter">counter of invocations</a>.
 Namely, a <code>CompletionStage</code> does not have to be completed in order
 to receive more invocations of the listener's methods.
 Here is an example of a listener that requests invocations, one at a
 time, until a complete message has been accumulated, then processes
 the result, and completes the <code>CompletionStage</code>:
 <pre><code>    WebSocket.Listener listener = new WebSocket.Listener() {

        List&lt;CharSequence&gt; parts = new ArrayList&lt;&gt;();
        CompletableFuture&lt;?&gt; accumulatedMessage = new CompletableFuture&lt;&gt;();

        public CompletionStage&lt;?&gt; onText(WebSocket webSocket,
                                         CharSequence message,
                                         boolean last) {
            parts.add(message);
            webSocket.request(1);
            if (last) {
                processWholeText(parts);
                parts = new ArrayList&lt;&gt;();
                accumulatedMessage.complete(null);
                CompletionStage&lt;?&gt; cf = accumulatedMessage;
                accumulatedMessage = new CompletableFuture&lt;&gt;();
                return cf;
            }
            return accumulatedMessage;
        }
    ...
    } </code> </pre></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>11</dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t5" class="tableTab" onclick="show(16);">Default Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onBinary(java.net.http.WebSocket,java.nio.ByteBuffer,boolean)">onBinary</a></span>&#8203;(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;data,
boolean&nbsp;last)</code></th>
<td class="colLast">
<div class="block">A binary data has been received.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onClose(java.net.http.WebSocket,int,java.lang.String)">onClose</a></span>&#8203;(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
int&nbsp;statusCode,
<a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;reason)</code></th>
<td class="colLast">
<div class="block">Receives a Close message indicating the WebSocket's input has been
 closed.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onError(java.net.http.WebSocket,java.lang.Throwable)">onError</a></span>&#8203;(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/lang/Throwable.html" title="class in java.lang">Throwable</a>&nbsp;error)</code></th>
<td class="colLast">
<div class="block">An error has occurred.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onOpen(java.net.http.WebSocket)">onOpen</a></span>&#8203;(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket)</code></th>
<td class="colLast">
<div class="block">A <code>WebSocket</code> has been connected.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onPing(java.net.http.WebSocket,java.nio.ByteBuffer)">onPing</a></span>&#8203;(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</code></th>
<td class="colLast">
<div class="block">A Ping message has been received.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onPong(java.net.http.WebSocket,java.nio.ByteBuffer)">onPong</a></span>&#8203;(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</code></th>
<td class="colLast">
<div class="block">A Pong message has been received.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onText(java.net.http.WebSocket,java.lang.CharSequence,boolean)">onText</a></span>&#8203;(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;data,
boolean&nbsp;last)</code></th>
<td class="colLast">
<div class="block">A textual data has been received.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="onOpen(java.net.http.WebSocket)">onOpen</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">onOpen</span>&#8203;(<span class="arguments"><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket)</span></div>
<div class="block">A <code>WebSocket</code> has been connected.

 <p> This is the initial invocation and it is made once. It is
 typically used to make a request for more invocations.</div>
<dl>
<dt><span class="simpleTagLabel">Implementation Requirements:</span></dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1); </code></pre></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>webSocket</code> - the WebSocket that has been connected</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="onText(java.net.http.WebSocket,java.lang.CharSequence,boolean)">onText</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="memberName">onText</span>&#8203;(<span class="arguments"><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;data,
boolean&nbsp;last)</span></div>
<div class="block">A textual data has been received.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as an indication it may reclaim the
 <code>CharSequence</code>. Do not access the <code>CharSequence</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl>
<dt><span class="simpleTagLabel">Implementation Requirements:</span></dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt><span class="simpleTagLabel">Implementation Note:</span></dt>
<dd>The <code>data</code> is always a legal UTF-16 sequence.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>webSocket</code> - the WebSocket on which the data has been received</dd>
<dd><code>data</code> - the data</dd>
<dd><code>last</code> - whether this invocation completes the message</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>CharSequence</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="onBinary(java.net.http.WebSocket,java.nio.ByteBuffer,boolean)">onBinary</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="memberName">onBinary</span>&#8203;(<span class="arguments"><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;data,
boolean&nbsp;last)</span></div>
<div class="block">A binary data has been received.

 <p> This data is located in bytes from the buffer's position to its
 limit.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as an indication it may reclaim the
 <code>ByteBuffer</code>. Do not access the <code>ByteBuffer</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl>
<dt><span class="simpleTagLabel">Implementation Requirements:</span></dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>webSocket</code> - the WebSocket on which the data has been received</dd>
<dd><code>data</code> - the data</dd>
<dd><code>last</code> - whether this invocation completes the message</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>ByteBuffer</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="onPing(java.net.http.WebSocket,java.nio.ByteBuffer)">onPing</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="memberName">onPing</span>&#8203;(<span class="arguments"><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</span></div>
<div class="block">A Ping message has been received.

 <p> As guaranteed by the WebSocket Protocol, the message consists of
 not more than <code>125</code> bytes. These bytes are located from the
 buffer's position to its limit.

 <p> Given that the WebSocket implementation will automatically send a
 reciprocal pong when a ping is received, it is rarely required to
 send a pong message explicitly when a ping is received.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as a signal it may reclaim the
 <code>ByteBuffer</code>. Do not access the <code>ByteBuffer</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl>
<dt><span class="simpleTagLabel">Implementation Requirements:</span></dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>webSocket</code> - the WebSocket on which the message has been received</dd>
<dd><code>message</code> - the message</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>ByteBuffer</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="onPong(java.net.http.WebSocket,java.nio.ByteBuffer)">onPong</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="memberName">onPong</span>&#8203;(<span class="arguments"><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</span></div>
<div class="block">A Pong message has been received.

 <p> As guaranteed by the WebSocket Protocol, the message consists of
 not more than <code>125</code> bytes. These bytes are located from the
 buffer's position to its limit.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as a signal it may reclaim the
 <code>ByteBuffer</code>. Do not access the <code>ByteBuffer</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl>
<dt><span class="simpleTagLabel">Implementation Requirements:</span></dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>webSocket</code> - the WebSocket on which the message has been received</dd>
<dd><code>message</code> - the message</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>ByteBuffer</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="onClose(java.net.http.WebSocket,int,java.lang.String)">onClose</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="memberName">onClose</span>&#8203;(<span class="arguments"><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
int&nbsp;statusCode,
<a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;reason)</span></div>
<div class="block">Receives a Close message indicating the WebSocket's input has been
 closed.

 <p> This is the last invocation from the specified <code>WebSocket</code>.
 By the time this invocation begins the WebSocket's input will have
 been closed.

 <p> A Close message consists of a status code and a reason for
 closing. The status code is an integer from the range
 <code>1000 &lt;= code &lt;= 65535</code>. The <code>reason</code> is a string which
 has a UTF-8 representation not longer than <code>123</code> bytes.

 <p> If the WebSocket's output is not already closed, the
 <code>CompletionStage</code> returned by this method will be used as an
 indication that the WebSocket's output may be closed. The WebSocket
 will close its output at the earliest of completion of the returned
 <code>CompletionStage</code> or invoking either of the <code>sendClose</code>
 or <code>abort</code> methods.</div>
<dl>
<dt><span class="simpleTagLabel">API Note:</span></dt>
<dd>Returning a <code>CompletionStage</code> that never completes,
 effectively disables the reciprocating closure of the output.

 <p> To specify a custom closure code or reason code the
 <code>sendClose</code> method may be invoked from inside the
 <code>onClose</code> invocation:
 <pre><code>    public CompletionStage&lt;?&gt; onClose(WebSocket webSocket,
                                      int statusCode,
                                      String reason) {
        webSocket.sendClose(CUSTOM_STATUS_CODE, CUSTOM_REASON);
        return new CompletableFuture&lt;Void&gt;();
    } </code> </pre></dd>
<dt><span class="simpleTagLabel">Implementation Requirements:</span></dt>
<dd>The default implementation of this method returns
 <code>null</code>, indicating that the output should be closed
 immediately.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>webSocket</code> - the WebSocket on which the message has been received</dd>
<dd><code>statusCode</code> - the status code</dd>
<dd><code>reason</code> - the reason</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>WebSocket</code> may be closed; or <code>null</code> if it may be
 closed immediately</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="onError(java.net.http.WebSocket,java.lang.Throwable)">onError</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">onError</span>&#8203;(<span class="arguments"><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
<a href="../../../../java.base/java/lang/Throwable.html" title="class in java.lang">Throwable</a>&nbsp;error)</span></div>
<div class="block">An error has occurred.

 <p> This is the last invocation from the specified WebSocket. By the
 time this invocation begins both the WebSocket's input and output
 will have been closed. A WebSocket may invoke this method on the
 associated listener at any time after it has invoked <code>onOpen</code>,
 regardless of whether or not any invocations have been requested from
 the WebSocket.

 <p> If an exception is thrown from this method, resulting behavior is
 undefined.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>webSocket</code> - the WebSocket on which the error has occurred</dd>
<dd><code>error</code> - the error</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WebSocket.Listener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><div style="margin-top: 14px;"><strong>Java SE 14 &amp; JDK 14</strong> </div></div>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase14.0.2&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples.<br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2020, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/technetwork/java/javase/terms/license/java14.0.2speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 14.0.2+12-46 --></small></p>
</footer>
</div>
</div>
</body>
</html>
